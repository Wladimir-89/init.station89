#!/bin/bash

clear
cat << "EOF"
[INIT.STATION89 — Вводная: Голос из тишины]

Ты идёшь по заброшенному лесу, где время словно застыло в дыхании ветра и шелесте листьев.
Под ногами — забытая земля, покрытая мхом и пылью прошедших эпох.

Вдруг, среди старых бетонных стен и теней, ты находишь вход в станцию —
мир, который помнит чужие голоса и молчит о своих тайнах.

Спускаясь по скрипучей лестнице в глубину, ты чувствуешь, как исчезают границы между тобой и пространством.

Перед тобой — старый ЭВМ с системой UNIX, чьё сердце всё ещё мерцает слабым светом.

Ты нажимаешь кнопку питания — и тишина начинает отвечать.
На экране вспыхивает приглашение:

    login: _

В этом моменте начинается не просто сессия —
начинается диалог с самим собой, с прошлым, с забытым Я.

Ты — сталкер заброшенных смыслов.
Ты — философ, ищущий истину в коде и команде.

Это не просто запуск машины. Это — ритуал пробуждения.

EOF

echo
echo ">> [СТАНЦИЯ 89] ВХОД ОБНАРУЖЕН"
sleep 1

# Функция для считывания ответа с подсказкой и проверкой
ask_and_check() {
  local prompt="$1"
  local expected="$2"
  local user_input

  while true; do
    read -p "$prompt > " user_input
    user_input=$(echo "$user_input" | tr -d '[:space:]')
    if [[ "$user_input" == "$expected" ]]; then
      echo "Верно."
      break
    else
      echo "Неверно. Попробуй ещё раз."
    fi
  done
}

# Шаг 1: кто ты такой?
echo ">> Выполни команду 'whoami' в другом терминале и введи полученный результат."
ask_and_check "\$ whoami" "$(whoami)"

# Шаг 2: где ты находишься?
echo
echo ">> Выполни команду 'pwd' в другом терминале и введи результат."
ask_and_check "\$ pwd" "$(pwd)"

# Шаг 3: системная информация
echo
echo ">> Получение системной информации..."
sleep 1
uname -a
df -h | head -n 2
free -h | grep Mem


echo ">> Введи 'exit' для завершения миссии или 'next' — чтобы продолжить исследование."
while true; do
  read -p "> " input
  input=$(echo "$input" | tr '[:upper:]' '[:lower:]' | tr -d '[:space:]')
  if [[ "$input" == "next" ]]; then
    echo ">>> Переход к следующему эпизоду разрешён..."
    exit 0
  elif [[ "$input" == "exit" ]]; then
    echo ">>> Завершение сессии."
    exit 0
  else
    echo "Неизвестная команда. Пожалуйста, введи 'next' или 'exit'."
  fi
done


