#!/bin/bash

clear
cat << "EOF"
[INIT.STATION89 — Глава 2: Видение Структуры]

Станция ожила, но лишь частично. Её сердце бьётся глухо — как эхо по коридорам, где давно не ступала нога.

Ты стоишь перед древней файловой системой, будто перед библиотекой затерянных миров.

Здесь каждый путь — это не просто адрес, а маршрут сквозь смысл,
каждая директория — обитель когда-то активных сущностей.

Ты ощущаешь: чтобы идти дальше, нужно научиться видеть.

EOF

echo
echo ">> [СТАНЦИЯ 89] ПРОБУЖДЕНИЕ ФАЙЛОВОЙ СТРУКТУРЫ"
sleep 1

# Функция проверки ответа
ask_and_check() {
  local prompt="$1"
  local expected="$2"
  local user_input

  while true; do
    read -p "$prompt > " user_input
    user_input=$(echo "$user_input" | tr -d '[:space:]')
    if [[ "$user_input" == "$expected" ]]; then
      echo "Верно."
      break
    else
      echo "Неверно. Попробуй ещё раз."
    fi
  done
}

# Шаг 1: просмотр содержимого
echo
echo ">> Ты чувствуешь, что нужно разглядеть пространство вокруг."
echo ">> Выполни команду 'ls' в терминале и введи результат (если несколько — через пробел)."
ask_and_check "\$ ls" "$(ls | tr '\n' ' ' | sed 's/ $//')"

# Шаг 2: где ты находишься?
echo
echo ">> Ты можешь определить своё местоположение внутри системы?"
ask_and_check "\$ pwd" "$(pwd)"

# Шаг 3: философия относительности и абсолюта
cat << "EOF"

Ты узнаёшь о двух способах восприятия мира:
— Абсолютный путь — как путь от корня реальности, от самого начала.
— Относительный путь — как движение из текущей точки, от того, кем ты уже являешься.

Абсолютный путь звучит как: /home/stalker/documents
Относительный: ../documents

Как и в жизни: иногда ты идёшь от начала всего. Иногда — от себя.

EOF

echo
echo ">> Готов ли ты к следующему шагу?"
while true; do
  read -p "> " input
  input=$(echo "$input" | tr '[:upper:]' '[:lower:]' | tr -d '[:space:]')
  if [[ "$input" == "next" ]]; then
    echo ">>> Переход к следующей главе..."
    exit 0
  elif [[ "$input" == "exit" ]]; then
    echo ">>> Завершение сеанса. До встречи в глубинах структуры."
    exit 0
  else
    echo "Неверный ввод. Введи 'next' или 'exit'."
  fi
done


